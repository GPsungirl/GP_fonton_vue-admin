(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a481612"],{1:function(e,t){},1169:function(e,t,i){var r=i("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"1c4c":function(e,t,i){"use strict";var r=i("9b43"),n=i("5ca1"),a=i("4bf8"),o=i("1fa8"),s=i("33a4"),d=i("9def"),l=i("f1ae"),c=i("27ee");n(n.S+n.F*!i("5cc5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,i,n,u,m=a(e),f="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,h=void 0!==g,_=0,v=c(m);if(h&&(g=r(g,p>2?arguments[2]:void 0,2)),void 0==v||f==Array&&s(v))for(t=d(m.length),i=new f(t);t>_;_++)l(i,_,h?g(m[_],_):m[_]);else for(u=v.call(m),i=new f;!(n=u.next()).done;_++)l(i,_,h?o(u,g,[n.value,_],!0):n.value);return i.length=_,i}})},2:function(e,t){},3:function(e,t){},"37c8":function(e,t,i){t.f=i("2b4c")},"3a72":function(e,t,i){var r=i("7726"),n=i("8378"),a=i("2d00"),o=i("37c8"),s=i("86cc").f;e.exports=function(e){var t=n.Symbol||(n.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},4:function(e,t){},5:function(e,t){},"5df3":function(e,t,i){"use strict";var r=i("02f4")(!0);i("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=r(t,i),this._i+=e.length,{value:e,done:!1})}))},6:function(e,t){},"67ab":function(e,t,i){var r=i("ca5a")("meta"),n=i("d3f4"),a=i("69a8"),o=i("86cc").f,s=0,d=Object.isExtensible||function(){return!0},l=!i("79e5")((function(){return d(Object.preventExtensions({}))})),c=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},u=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!d(e))return"F";if(!t)return"E";c(e)}return e[r].i},m=function(e,t){if(!a(e,r)){if(!d(e))return!0;if(!t)return!1;c(e)}return e[r].w},f=function(e){return l&&p.NEED&&d(e)&&!a(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:u,getWeak:m,onFreeze:f}},"7bbc":function(e,t,i){var r=i("6821"),n=i("9093").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return n(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):n(r(e))}},"7f6d":function(e,t,i){"use strict";i("ba0f");function r(e){var t=JSON.parse(JSON.stringify(e));return t.map((function(e){return n(e)}))}function n(e){return e["id"]=e.authorityid,e["label"]=e.functionname+e.authorityid,e.subAuthority&&(e["children"]=[],e.subAuthority.map((function(t){e["children"].push(n(t))}))),e}t["a"]={designData_tree:r}},"8a81":function(e,t,i){"use strict";var r=i("7726"),n=i("69a8"),a=i("9e1e"),o=i("5ca1"),s=i("2aba"),d=i("67ab").KEY,l=i("79e5"),c=i("5537"),u=i("7f20"),m=i("ca5a"),f=i("2b4c"),p=i("37c8"),g=i("3a72"),h=i("d4c0"),_=i("1169"),v=i("cb7c"),b=i("d3f4"),y=i("4bf8"),F=i("6821"),k=i("6a99"),w=i("4630"),I=i("2aeb"),x=i("7bbc"),S=i("11e9"),$=i("2621"),P=i("86cc"),E=i("0d58"),O=S.f,R=P.f,C=x.f,D=r.Symbol,M=r.JSON,j=M&&M.stringify,U="prototype",L=f("_hidden"),N=f("toPrimitive"),A={}.propertyIsEnumerable,T=c("symbol-registry"),V=c("symbols"),q=c("op-symbols"),K=Object[U],J="function"==typeof D&&!!$.f,z=r.QObject,W=!z||!z[U]||!z[U].findChild,H=a&&l((function(){return 7!=I(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(e,t,i){var r=O(K,t);r&&delete K[t],R(e,t,i),r&&e!==K&&R(K,t,r)}:R,Y=function(e){var t=V[e]=I(D[U]);return t._k=e,t},B=J&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},G=function(e,t,i){return e===K&&G(q,t,i),v(e),t=k(t,!0),v(i),n(V,t)?(i.enumerable?(n(e,L)&&e[L][t]&&(e[L][t]=!1),i=I(i,{enumerable:w(0,!1)})):(n(e,L)||R(e,L,w(1,{})),e[L][t]=!0),H(e,t,i)):R(e,t,i)},Q=function(e,t){v(e);var i,r=h(t=F(t)),n=0,a=r.length;while(a>n)G(e,i=r[n++],t[i]);return e},X=function(e,t){return void 0===t?I(e):Q(I(e),t)},Z=function(e){var t=A.call(this,e=k(e,!0));return!(this===K&&n(V,e)&&!n(q,e))&&(!(t||!n(this,e)||!n(V,e)||n(this,L)&&this[L][e])||t)},ee=function(e,t){if(e=F(e),t=k(t,!0),e!==K||!n(V,t)||n(q,t)){var i=O(e,t);return!i||!n(V,t)||n(e,L)&&e[L][t]||(i.enumerable=!0),i}},te=function(e){var t,i=C(F(e)),r=[],a=0;while(i.length>a)n(V,t=i[a++])||t==L||t==d||r.push(t);return r},ie=function(e){var t,i=e===K,r=C(i?q:F(e)),a=[],o=0;while(r.length>o)!n(V,t=r[o++])||i&&!n(K,t)||a.push(V[t]);return a};J||(D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=m(arguments.length>0?arguments[0]:void 0),t=function(i){this===K&&t.call(q,i),n(this,L)&&n(this[L],e)&&(this[L][e]=!1),H(this,e,w(1,i))};return a&&W&&H(K,e,{configurable:!0,set:t}),Y(e)},s(D[U],"toString",(function(){return this._k})),S.f=ee,P.f=G,i("9093").f=x.f=te,i("52a7").f=Z,$.f=ie,a&&!i("2d00")&&s(K,"propertyIsEnumerable",Z,!0),p.f=function(e){return Y(f(e))}),o(o.G+o.W+o.F*!J,{Symbol:D});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)f(re[ne++]);for(var ae=E(f.store),oe=0;ae.length>oe;)g(ae[oe++]);o(o.S+o.F*!J,"Symbol",{for:function(e){return n(T,e+="")?T[e]:T[e]=D(e)},keyFor:function(e){if(!B(e))throw TypeError(e+" is not a symbol!");for(var t in T)if(T[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!J,"Object",{create:X,defineProperty:G,defineProperties:Q,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ie});var se=l((function(){$.f(1)}));o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function(e){return $.f(y(e))}}),M&&o(o.S+o.F*(!J||l((function(){var e=D();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))}))),"JSON",{stringify:function(e){var t,i,r=[e],n=1;while(arguments.length>n)r.push(arguments[n++]);if(i=t=r[1],(b(t)||void 0!==e)&&!B(e))return _(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!B(t))return t}),r[1]=t,j.apply(M,r)}}),D[U][N]||i("32e9")(D[U],N,D[U].valueOf),u(D,"Symbol"),u(Math,"Math",!0),u(r.JSON,"JSON",!0)},ac4d:function(e,t,i){i("3a72")("asyncIterator")},b501:function(e,t,i){},d4c0:function(e,t,i){var r=i("0d58"),n=i("2621"),a=i("52a7");e.exports=function(e){var t=r(e),i=n.f;if(i){var o,s=i(e),d=a.f,l=0;while(s.length>l)d.call(e,o=s[l++])&&t.push(o)}return t}},f3e4:function(e,t,i){"use strict";var r=i("b501"),n=i.n(r);n.a},feb4:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"userPermission"},[i("div",{staticClass:"query_field mar_b10"},[i("el-row",[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.refreshData}},[e._v("刷新")])],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"role_name",label:"角色名称",width:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"role_describe",label:"角色描述",width:""}}),e._v(" "),i("el-table-column",{attrs:{prop:"",label:"权限",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.permission.indexOf("view")>-1?i("span",[e._v("查看")]):e._e(),e._v(" "),t.row.permission.indexOf("edit")>-1?i("span",[e._v("编辑")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.modi_permisson(t.row)}}},[e._v("调整权限")])]}}])})],1),e._v(" "),i("div",{staticClass:"block mar_t10"},[i("el-pagination",{attrs:{"current-page":e.currentPage,background:"",layout:"total, prev, pager, next, jumper",total:e.pageTotal},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.modi_loading,expression:"modi_loading"}],staticClass:"modiUsers_dialog dialog_tip",attrs:{title:e.d_modi_userPermission.modi_title,visible:e.permission_dialogVisible,width:"40%",center:"","close-on-click-modal":!1,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.permission_dialogVisible=t}}},[i("div",[i("el-row",[i("el-col",{attrs:{span:14}},[i("div",{staticClass:"grid-content bg-purple-dark pad_t2"},[i("el-form",{ref:"valid_modiForm",staticClass:"demo-ruleForm valid_form",attrs:{model:e.valid_modiForm,rules:e.modi_rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[i("el-input",{model:{value:e.valid_modiForm.name,callback:function(t){e.$set(e.valid_modiForm,"name",t)},expression:"valid_modiForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述",prop:"txt"}},[i("el-input",{model:{value:e.valid_modiForm.txt,callback:function(t){e.$set(e.valid_modiForm,"txt",t)},expression:"valid_modiForm.txt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色权限",prop:"permission"}},[i("el-select",{attrs:{multiple:"",placeholder:"角色权限"},model:{value:e.valid_modiForm.permission,callback:function(t){e.$set(e.valid_modiForm,"permission",t)},expression:"valid_modiForm.permission"}},e._l(e.valid_modiForm.permissions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.txt,value:e.id}})})),1)],1)],1)],1)]),e._v(" "),i("el-col",{attrs:{span:10}},[i("div",{staticClass:"grid-content bg-purple-dark "},[i("el-tree",{ref:"modiTree",attrs:{data:e.modiDialog_tree,"show-checkbox":"","node-key":"id","default-expanded-keys":e.modi_default_ids,"default-checked-keys":e.modi_default_ids,"highlight-current":"",accordion:""}})],1)])],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.permission_dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.modiData_userPermission}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.add_loading,expression:"add_loading"}],staticClass:"addUsers_dialog dialog_tip",attrs:{title:"新增角色",visible:e.addUsers_dialogVisible,width:"40%",center:"","close-on-click-modal":!1,"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:visible":function(t){e.addUsers_dialogVisible=t}}},[i("div",{staticClass:"dialogBody_addPermission"},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content bg-purple-dark pad_t2"},[i("el-form",{ref:"valid_addForm",staticClass:"valid_form demo-ruleForm",attrs:{model:e.valid_addForm,rules:e.add_rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"角色名称"},model:{value:e.valid_addForm.name,callback:function(t){e.$set(e.valid_addForm,"name",t)},expression:"valid_addForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述",prop:"txt"}},[i("el-input",{attrs:{placeholder:"角色描述"},model:{value:e.valid_addForm.txt,callback:function(t){e.$set(e.valid_addForm,"txt",t)},expression:"valid_addForm.txt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色权限",prop:"permission"}},[i("el-select",{attrs:{multiple:"",placeholder:"选择角色权限"},model:{value:e.valid_addForm.permission,callback:function(t){e.$set(e.valid_addForm,"permission",t)},expression:"valid_addForm.permission"}},e._l(e.valid_addForm.permissions,(function(e,t){return i("el-option",{key:t,attrs:{label:e.txt,value:e.id}})})),1)],1)],1)],1)]),e._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content bg-purple-dark pad_l34"},[i("el-tree",{ref:"add_tree",attrs:{data:e.addDialog_tree,"show-checkbox":"","node-key":"id","highlight-current":"",accordion:""}})],1)])],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(t){e.addUsers_dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.save_addSysRole}},[e._v("确 定")])],1)])],1)},n=[],a=(i("ac6a"),i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("6b54"),i("28a5"),i("7f7f"),i("96cf"),i("1da1")),o=i("cf45"),s=i("7f6d");function d(e,t){var i;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=l(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var u={name:"sysRole",data:function(){return{tableData:[],tableLoading:!1,pageTotal:100,currentPage:1,permission_dialogVisible:!1,addUsers_dialogVisible:!1,form:{name:"",txt:"",permission:""},formLabelWidth:"120px",addDialog_tree:[],modiDialog_tree:[],modi_default_ids:[],valid_addForm:{name:"",txt:"",permission:[],permissions:[{id:"edit",txt:"编辑"},{id:"view",txt:"查看"}]},add_rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],txt:[{required:!0,message:"请输入角色描述",trigger:"blur"}],permission:[{required:!0,message:"请选择角色权限",trigger:"change"}]},valid_modiForm:{name:"",txt:"",permission:[],permissions:[{id:"edit",txt:"编辑"},{id:"view",txt:"查看"}]},modi_rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],txt:[{required:!0,message:"请输入角色描述",trigger:"blur"}],permission:[{required:!0,message:"请选择角色权限",trigger:"change"}]},d_modi_userPermission:{modi_title:"",role_name:"",id:"",permission:"",role_describe:""},modi_loading:!1,add_loading:!1}},created:function(){this.getList_userPermission(1)},methods:{test:function(){var e=JSON.parse('[{"checked":false,"icon":"verify","id":749,"name":"审核管理","pId":0,"parentMenu":null,"sort":1,"nodes":[{"checked":false,"icon":"","id":750,"name":"审核管理","pId":749,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=750"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=749"},{"checked":false,"icon":"ad","id":751,"name":"广告管理","pId":0,"parentMenu":null,"sort":2,"nodes":[{"checked":false,"icon":"","id":752,"name":"广告管理","pId":751,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=752"},{"checked":false,"icon":"","id":753,"name":"广告位管理","pId":751,"parentMenu":null,"sort":2,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=753"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=751"},{"checked":false,"icon":"news","id":754,"name":"消息管理","pId":0,"parentMenu":null,"sort":3,"nodes":[{"checked":false,"icon":"","id":755,"name":"消息管理","pId":754,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=755"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=754"},{"checked":false,"icon":"users","id":756,"name":"用户管理","pId":0,"parentMenu":null,"sort":4,"nodes":[{"checked":false,"icon":"","id":757,"name":"用户管理","pId":756,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=757"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=756"},{"checked":false,"icon":"messages","id":758,"name":"留言管理","pId":0,"parentMenu":null,"sort":5,"nodes":[{"checked":false,"icon":"","id":759,"name":"留言管理","pId":758,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=759"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=758"},{"checked":false,"icon":"complaint","id":760,"name":"投诉管理","pId":0,"parentMenu":null,"sort":6,"nodes":[{"checked":false,"icon":"","id":761,"name":"投诉管理","pId":760,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=761"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=760"},{"checked":false,"icon":"function","id":762,"name":"功能建议","pId":0,"parentMenu":null,"sort":7,"nodes":[{"checked":false,"icon":"","id":763,"name":"功能建议","pId":762,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=763"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=762"},{"checked":false,"icon":"back","id":764,"name":"后台用户管理","pId":0,"parentMenu":null,"sort":8,"nodes":[{"checked":false,"icon":"","id":765,"name":"用户管理","pId":764,"parentMenu":null,"sort":1,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=765"},{"checked":false,"icon":"","id":766,"name":"角色管理","pId":764,"parentMenu":null,"sort":2,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=766"},{"checked":false,"icon":"","id":767,"name":"菜单管理","pId":764,"parentMenu":null,"sort":3,"nodes":[],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=767"}],"target":"treeFrame","type":"","url":"/menu/toEdit.do?id=764"}]');console.log(e);for(var t=0;t<e.length;t++);},refreshData:function(){this.getList_userPermission(this.currentPage)},getList_userPermission:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tableLoading=!0,i={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,pageNum:t,pageSize:10}},e.next=4,this.$http.post("".concat(o["a"].baseUrl,"/sysRole/selectSysRole"),i);case 4:r=e.sent,"0000"==r.data.code&&(n=r.data.data.sysRoleList,console.log(n),this.tableData=n,this.pageTotal=r.data.data.page.pageTotal,this.tableLoading=!1);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handle_addUserPermisson:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.addUsers_dialogVisible=!0,this.resetForm("valid_addForm"),this.$refs.add_tree&&this.$refs.add_tree.setCheckedKeys([]),t={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId}},this.add_loading=!0,e.next=7,this.$http.post("".concat(o["a"].baseUrl,"/sysRole/addSysRole"),t);case 7:i=e.sent,"0000"==i.data.code&&(r=s["a"].designData_tree(i.data.data.sysMenuList),this.addDialog_tree=r,this.add_loading=!1);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getData_onePermission:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId}},e.next=3,this.$http.post("".concat(o["a"].baseUrl,"/sysRole/addSysRole"),t);case 3:i=e.sent,"0000"==i.data.code&&(r=s["a"].designData_tree(i.data.data.sysMenuList),this.addDialog_tree=r,this.modiDialog_tree=r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),save_addSysRole:function(){var e=this,t=this.$refs.add_tree.getCheckedKeys(),i=this.$refs.add_tree.getHalfCheckedKeys();if(i.length>0&&(t=t.concat(i)),0!=t.length){if(this.m_valid_addForm("valid_addForm")){var r={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,mid:t.join(","),permission:this.valid_addForm.permission.join(","),role_describe:this.valid_addForm.txt,role_name:this.valid_addForm.name}};this.add_loading=!0,this.$http.post("".concat(o["a"].baseUrl,"/sysRole/saveSysRole"),r).then((function(t){"0000"==t.data.code?(e.add_loading=!1,e.m_message(t.data.msg,"success"),e.getList_userPermission(e.currentPage),e.addUsers_dialogVisible=!1):(e.add_loading=!1,e.m_message(t.data.msg,"success"))})).catch((function(e){console.log(e)}))}}else this.m_message("请为该用户分配权限","warning")},getTreeNode:function(){console.log(this.$refs.add_tree.getCheckedKeys())},modi_permisson:function(e){var t=this;this.permission_dialogVisible=!0,this.d_modi_userPermission.permission=e.permission,this.d_modi_userPermission.role_name=e.role_name,this.d_modi_userPermission.role_describe=e.role_describe,this.d_modi_userPermission.id=e.id,this.modi_default_ids=[],this.d_modi_userPermission.modi_title="调整"+e.role_name+"的权限";var i={data:{id:e.id,signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId}};this.modi_loading=!0,this.$http.post("".concat(o["a"].baseUrl,"/sysRole/updateSysRole"),i).then((function(e){if("0000"==e.data.code){var i=s["a"].designData_tree(e.data.data.menuList);t.modiDialog_tree=i;var r=[];if(e.data.data.sysMenuList.length>0){var n,a=d(e.data.data.sysMenuList);try{for(a.s();!(n=a.n()).done;){var o=n.value;t.modi_default_ids.push(o.id),r.push(o.id)}}catch(g){a.e(g)}finally{a.f()}}for(var l=0;l<r.length;l++)for(var c=0;c<t.modiDialog_tree.length;c++)if(r[l]==t.modiDialog_tree[c].id&&"children"in t.modiDialog_tree[c]){for(var u=!1,m=0;m<t.modiDialog_tree[c].children.length;m++){var f=r.indexOf(t.modiDialog_tree[c].children[m].id);-1==f&&(u=!0)}u&&r.splice(l,1)}t.modi_default_ids=r,t.$refs.modiTree&&t.$refs.modiTree.setCheckedKeys(t.modi_default_ids);var p=e.data.data.sysRole;t.valid_modiForm.name=p.role_name,t.valid_modiForm.txt=p.role_describe,t.valid_modiForm.permission=p.permission.split(","),t.modi_loading=!1}})).catch((function(e){}))},modiData_userPermission:function(){var e=this,t=this.$refs.modiTree.getCheckedKeys(),i=this.$refs.modiTree.getHalfCheckedKeys();if(i.length>0&&(t=t.concat(i)),this.m_valid_addForm("valid_modiForm")){var r={data:{signInUserId:this.$store.getters.userId,signInRoleId:this.$store.getters.roleId,id:this.d_modi_userPermission.id,mid:t.join(","),permission:this.valid_modiForm.permission.join(","),role_describe:this.valid_modiForm.role_describe,role_name:this.valid_modiForm.name}};this.modi_loading=!0,this.$http.post("".concat(o["a"].baseUrl,"/sysRole/saveSysRole"),r).then((function(t){"0000"==t.data.code?(e.modi_loading=!1,e.m_message(t.data.msg,"success"),e.getList_userPermission(e.currentPage),e.permission_dialogVisible=!1):e.m_message(t.data.msg,"success")})).catch((function(e){console.log(e)}))}},handleCurrentChange:function(e){this.currentPage=e,this.getList_userPermission(e)},m_valid_addForm:function(e){var t=!1;return this.$refs[e].validate((function(e){return e?(t=!0,!0):(t=!1,!1)})),t},m_message:function(e,t){this.$message({message:e,type:t})},resetForm:function(e){this.$refs[e]&&this.$refs[e].resetFields()},diguiquchu:function(e,t,i,r,n){var a=this;t.map((function(t,o){t.id==i&&t.child?(n.push(i),a.diguiquchu(e,t.child,i,r,n)):t.id!=i&&t.child&&a.diguiquchu(e,t.child,i,r,n)}))}}},m=u,f=(i("f3e4"),i("2877")),p=Object(f["a"])(m,r,n,!1,null,null,null);t["default"]=p.exports}}]);